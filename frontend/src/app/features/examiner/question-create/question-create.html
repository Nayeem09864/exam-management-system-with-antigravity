<div class="max-w-3xl mx-auto">
    <div class="mb-8">
        <h2 class="text-3xl font-bold text-gray-800">Add Question</h2>
        <p class="text-gray-500">Add a new question to the question bank</p>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-8">
        <div *ngIf="successMessage" class="mb-6 p-4 bg-green-50 text-green-700 rounded-xl border border-green-200">
            {{ successMessage }}
        </div>

        <form [formGroup]="questionForm" (ngSubmit)="onSubmit()" class="space-y-6">

            <!-- Question Content -->
            <div>
                <label for="content" class="block text-sm font-medium text-gray-700 mb-1">Question Text</label>
                <textarea id="content" formControlName="content" rows="3"
                    class="w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                    placeholder="Enter the question here..."></textarea>
                <div *ngIf="questionForm.get('content')?.touched && questionForm.get('content')?.invalid"
                    class="text-red-500 text-sm mt-1">
                    Question text is required.
                </div>
            </div>

            <!-- Options -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Options</label>
                <div formArrayName="options" class="space-y-3">
                    <div *ngFor="let option of options.controls; let i = index" class="flex items-center space-x-3">
                        <span class="text-gray-500 font-medium w-6">{{i + 1}}.</span>
                        <input [formControlName]="i" type="text"
                            class="flex-1 px-4 py-2 rounded-xl bg-gray-50 border border-gray-200 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                            [placeholder]="'Option ' + (i + 1)">

                        <button type="button" (click)="removeOption(i)" *ngIf="options.length > 2"
                            class="p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors" title="Remove Option">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>
                <button type="button" (click)="addOption()"
                    class="mt-3 text-purple-600 text-sm font-medium hover:text-purple-700 flex items-center space-x-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>Add Another Option</span>
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Correct Answer -->
                <div>
                    <label for="correctOption" class="block text-sm font-medium text-gray-700 mb-1">Correct
                        Answer</label>
                    <select id="correctOption" formControlName="correctOption"
                        class="w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all cursor-pointer">
                        <option value="" disabled>Select correct answer</option>
                        <option *ngFor="let opt of options.controls" [value]="opt.value" [disabled]="!opt.value">
                            {{ opt.value || '(Enter option text first)' }}
                        </option>
                    </select>
                    <div *ngIf="questionForm.get('correctOption')?.touched && questionForm.get('correctOption')?.invalid"
                        class="text-red-500 text-sm mt-1">
                        Please select the correct answer.
                    </div>
                </div>

                <!-- Difficulty -->
                <div>
                    <label for="difficulty" class="block text-sm font-medium text-gray-700 mb-1">Difficulty</label>
                    <select id="difficulty" formControlName="difficulty"
                        class="w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all cursor-pointer">
                        <option value="EASY">Easy</option>
                        <option value="MEDIUM">Medium</option>
                        <option value="HARD">Hard</option>
                    </select>
                </div>
            </div>

            <!-- Category -->
            <div>
                <label for="category" class="block text-sm font-medium text-gray-700 mb-1">Category (Optional)</label>
                <input type="text" id="category" formControlName="category"
                    class="w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                    placeholder="e.g. Physics, History, Math">
            </div>

            <div class="flex justify-end space-x-4 pt-4 border-t border-gray-100">
                <button type="button" routerLink="/dashboard"
                    class="px-6 py-3 text-gray-600 font-medium hover:bg-gray-50 rounded-xl transition-colors">Cancel</button>
                <button type="submit" [disabled]="questionForm.invalid || isLoading"
                    class="bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-purple-500/30 transform hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                    <span *ngIf="!isLoading">Add Question</span>
                    <span *ngIf="isLoading">Saving...</span>
                </button>
            </div>
        </form>
    </div>
</div>